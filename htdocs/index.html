<!DOCTYPE html> 
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  
  <title>forna</title>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="RNA Secondary Structure Visualization Using a Force Directed Graph Layout"/>
  <meta name="keywords" content="RNA, secundary structure, visualization, force directed graph, plot, svg"/>
  <meta name="author" content="Stefan Hammer"/>
  <meta name="author" content="Peter Kerpedjiev"/>

  <!--
  <link rel="icon" type="image/png" href="img/favicon-192x192.png" sizes="192x192"/>
  <link rel="icon" type="image/png" href="img/favicon-32x32.png" sizes="32x32"/>
  <link rel="icon" type="image/png" href="img/favicon-16x16.png" sizes="16x16"/>
  -->
  
  <!-- CSS -->
  <!--Bootstrap: http://getbootstrap.com/-->
  <link rel='stylesheet' type='text/css' href='css/bootstrap.min.css'/>
  <link rel='stylesheet' type='text/css' href='css/bootstrap-switch.css' />
  <link rel='stylesheet' type='text/css' href='css/bootstrap-slider.min.css'/>
  <!-- custom CSS -->
  <link rel='stylesheet' type='text/css' href='css/fornac.css' />
  <link rel='stylesheet' type='text/css' href='css/interface.css' />

  <!-- Java Script -->
  <!-- jQuery -->
  <script type="text/javascript" src="js/jquery.js"></script>
  <!-- Knockout: http://knockoutjs.com/downloads/index.html -->
  <script type="text/javascript" src="js/knockout-3.2.0.js"></script>
  <script type="text/javascript" src="js/knockout-bindings.js"></script>
  <!-- Bootstrap Javascript Plugins: http://getbootstrap.com/ -->
  <script type="text/javascript" src="js/bootstrap.min.js"></script>
  <!-- bootstrap on off switch and slider -->
  <script type="text/javascript" src="js/bootstrap-switch.js"></script>
  <script type="text/javascript" src="js/bootstrap-slider.min.js"></script>
  <!-- D3 -->
  <script type="text/javascript" src="js/d3.js"></script>
  <!-- File Saver https://github.com/eligrey/FileSaver.js -->
  <script type="text/javascript" src="js/FileSaver.min.js"></script>
  <!-- saveSvgAsPng.js -->
  <script type="text/javascript" src="js/saveSvgAsPng.js"></script>
</head>
<body>
<div id="main">

  <!-- 'Custom Colors' modal -->
  <div class="modal fade" id="addColors" > <!-- data-bind="showModal: loaded"-->
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title">Edit Color Scheme</h4>
        </div>
        <div class="modal-body">
          <form role="form">
            <div class="form-group">
              <label for="ColorInput">Color Specifications:</label>
              <textarea type="text" class="form-control" id="ColorInput" placeholder="" rows="2" data-bind="value: input" autofocus required></textarea>
            </div>
            <div class="alert alert-danger" role="alert" data-bind="visible: inputError().length > 0, html: inputError" id="inputError"> </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal" data-bind="click: cancelColor">Cancel</button>
          <button type="submit" id="ColorSubmit" data-bind="click: colorSubmit" class="btn btn-primary" data-loading-text="Loading...">Submit</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal custom colors -->

  <!-- 'About' modal -->
  <div class="modal fade" id="about">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"> <span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title">About forna</h4>
        </div>
        <div class="modal-body">
            <!--
          <div style="float: right;">
            <img src="img/favicon-192x192.png" alt="forna logo" title="forna logo" width="150" align="right" />
          </div>
            -->
          <h1>RNA Secondary Structure Visualization Using a Force Directed Graph Layout</h1>
          <h4 id="overview">Overview</h4>
          <p>TriplexRNA database embeds the <code>forna</code> package: a web interface for displaying RNA secondary structures using the
          <a href="https://github.com/mbostock/d3/wiki/Force-Layout" target="_blank">force-directed graph layout</a> provided by the
          <a href="http://d3js.org/" target="_blank">d3.js visualization library</a>.<br/>
          The package's front-end makes use of <a href="http://getbootstrap.com">Bootstrap</a> and
          <a href="http://knockoutjs.com/" target="_blank">Knockout.js</a>, while the back-end uses
          <a href="http://flask.pocoo.org/" target="_blank">Flask</a>. <br/>
          RNA structure manipulation and graph construction are created using the python
          <a href="http://www.tbi.univie.ac.at/~pkerp/forgi/" target="_blank">forgi</a> RNA structure manipulation library and the provided
          <code>forna.py</code> script.<br/>
          Forna heavily depends on the python bindings of the
          <a href="http://www.tbi.univie.ac.at/RNA/" target="_blank">ViennaRNA</a> package.</p>
          <h4 id="usage">Usage</h4>
          <p>For a comprehensive usage of the forna visualization tool, please refer to its
          <a href="http://nibiru.tbi.univie.ac.at/forna/documentation.html" target="_blank">official documentation page</a>.<br/>
          Questions and/or comments related to the package can be sent to <a href="mailto:forna@tbi.univie.ac.at">forna@tbi.univie.ac.at</a></p>
          <h4 id="citations">Citations</h4>
           [1] Gendron P, Lemieux S, Major F(2001). Quantitative analysis of nucleic acid three-dimensional structures. J Mol Biol 308:919â€“936.
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

  <!-- Main content starts here! -->
  <!-- the graph goes here -->
  <div class="gallery" id='chart'>

    <div class="menu-top">
      <div class="menu-left">
      </div>
      
      <div class="menu-right">
        <div class="btn-group" id="About" data-toggle="tooltip" data-placement="bottom" title="About" data-delay='{"show":"800", "hide":"50"}'>
          <button data-bind="click: showAbout" class="btn btn-default"><span class="glyphicon glyphicon-question-sign"></span></button>
        </div>
      </div>
    </div>
    
    <div class="menu-bottom">
      <div class="menu-left">
        <div class="btn-group" data-toggle="tooltip" data-placement="top" title="Animation (Key: Space)" data-delay='{"show":"800", "hide":"50"}'>
          <input type="checkbox" class="bootstrap-switch"  data-bind="bootstrapSwitchOn: animation" name="animation-toggle">
        </div>
        <div class="btn-group" data-toggle="tooltip" data-placement="top" title="Center molecules (Key: C)" data-delay='{"show":"800", "hide":"50"}'>
          <button data-bind="click: centerMolecules" class="btn btn-default"><span class="glyphicon glyphicon-screenshot"></span></button>
        </div>
        
        <div class="btn-group dropup">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
            Colors&nbsp;<span class="caret">&nbsp;</span>
            <span class="sr-only">Toggle Dropdown</span>
          </button>
          <ul class="dropdown-menu menu-form" role="menu">
            <li role="presentation" class="dropdown-header">Color Scheme</li>
            <li role="presentation" data-bind="css: { active: colors() === 'positions' }">
              <label role="menuitem">
                <input type="radio" name="colors" data-bind="checked: colors, checkedValue: 'positions'"> Positions
              </label>
            <li>
            <li role="presentation" data-bind="css: { active: colors() === 'structure' }">
              <label role="menuitem">
                <input type="radio" name="colors" data-bind="checked: colors, checkedValue: 'structure'"> Structure
              </label>
            </li>
            <li role="presentation" data-bind="css: { active: colors() === 'sequence' }">
              <label role="menuitem">
                <input type="radio" name="colors" data-bind="checked: colors, checkedValue: 'sequence'"> Sequence
              </label>
            </li>
            <li role="presentation" data-bind="css: { active: colors() === 'custom' }">
              <label role="menuitem">
                <input type="radio" name="colors" data-bind="checked: colors, checkedValue: 'custom', checkedVaue: 'custom'"> Custom&nbsp;
                <button type="button" role="menuitem" data-bind="click: showCustomColors, attr: { 'class': colors() === 'custom' ? 'btn btn-xs btn-default' : 'btn btn-xs btn-primary' }">Set</button>
              </label>
            </li>
          </ul>
        </div>
        
        <div class="btn-group dropup">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
            <span class="glyphicon glyphicon-cog">&nbsp;</span>
            <span class="caret"></span>
            <span class="sr-only">Toggle Dropdown</span>
          </button>
          <ul class="dropdown-menu menu-form" role="menu">
              <li role="presentation" class="dropdown-header">Display Options</li>
              <li role="presentation" data-bind="css: {active: numbering}">
                <label role="menuitem">
                  <input type="checkbox" data-bind="checked: numbering"> Sequence numbering
                </label>
              </li>
              <li role="presentation" data-bind="css: {active: nodeLabel}">
                <label role="menuitem">
                  <input type="checkbox" data-bind="checked: nodeLabel"> Nucleotide label
                </label>
              </li>
              <li role="presentation" data-bind="css: {active: nodeOutline}">
                <label role="menuitem">
                  <input type="checkbox" data-bind="checked: nodeOutline"> Nucleotide outline
                </label>
              </li>
              <li role="presentation" data-bind="css: {active: displayLinks}">
                <label role="menuitem">
                  <input type="checkbox" data-bind="checked: displayLinks"> Links
                </label>
              </li>
              <li role="presentation" data-bind="css: {active: displayPseudoknotLinks}">
                <label role="menuitem">
                  <input type="checkbox" data-bind="checked: displayPseudoknotLinks"> Pseudoknot Links
                </label>
              </li>
              <li role="presentation" data-bind="css: {active: displayProteinLinks}">
                <label role="menuitem">
                  <input type="checkbox" data-bind="checked: displayProteinLinks"> Protein Links
                </label>
              </li>
              <li role="presentation" class="divider"></li>
              <li role="presentation" class="dropdown-header">Force Field Options</li>
              <li class="form-group">
                <label for="pseudoknotStrength" role="menuitem">Pseudoknot strength<br>
                  <input type="text" id="pseudoknotStrength" class="slider form-control"  data-bind="sliderValue: {value: pseudoknotStrength, min:0, max: 2, step: 0.1}"/>
                </label>
              </li>
              <li class="form-group">
                <label for="friction" role="menuitem">Force friction<br>
                  <input type="text" id="friction" class="slider form-control"  data-bind="sliderValue: {value: friction, min:0, max: 100, step: 1}"/>
                </label>
                <label for="charge" role="menuitem">Node Charge<br>
                  <input type="text" id="charge" class="slider form-control"  data-bind="sliderValue: {value: charge, min:-80, max: 0, step: 1}"/>
                </label>
              </li>
              <li class="form-group">
                <label for="friction" role="menuitem">Gravity<br>
                  <input type="text" id="gravity" class="slider form-control"  data-bind="sliderValue: {value: gravity, min:0, max: 1, step: 0.1}"/>
                </label>
              </li>
          </ul>            
        </div>
        <div class="btn-group" data-toggle="tooltip" data-placement="top" title="Fullscreen" data-delay='{"show":"800", "hide":"50"}'>
          <button onclick="toggleFullScreen('main'); return false;" class="btn btn-default"><span class="glyphicon glyphicon-fullscreen"></span></button>
        </div>
      </div>
      
      <div class="menu-right">
        <div class="btn-group dropup">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                <span class="glyphicon glyphicon-download-alt">&nbsp;</span>
                <span class="caret"></span>
                <span class="sr-only">Toggle Dropdown</span>
            </button>
            <ul class="dropdown-menu dropdown-menu-right menu-form" role="menu">
                <!-- Dropdown menu links -->
                <li role="presentation" data-bind="css: {active: background}">
                  <label role="menuitem">
                    <input type="checkbox" data-bind="checked: background"> Background
                  </label>
                </li>
                <li role="presentation" class="divider"></li>
                <li role="presentation" class="dropdown-header">Save as ...</li>
                <li role="presentation"><a role="menuitem" data-bind="click: saveSVG" download="rna.svg">SVG</a></li>
                <li role="presentation"><a role="menuitem" data-bind="click: savePNG" download="rna.png">PNG</a></li>
                <li role="presentation"><a role="menuitem" data-bind="click: saveJSON" download="rna.json">JSON</a></li>
            </ul>
        </div>
        
      </div>
    </div>
    
    <!-- fornac javascript -->
    <script type="text/javascript" src="js/fornac.js"></script>
    <!-- interface javascript -->
    <script type="text/javascript" src="js/interface.js"></script>
    
  </div>
</div> 
</body>
</html>
